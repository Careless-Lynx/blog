<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>如何从Debian11升级到Debian13 | Vps901&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="原文因为遥遥领先的Z-BlogPHP的编辑器不支持MarkDown，操作超级麻烦，所以干脆就丢到我们的Hexo博客来写了。   本文没图，请放心浏览。   今天的主题是不使用DD脚本把Debian11保数据升级到Debian13，因为本人过于懒惰，这里引用我们的GPT3.5的回答来作为教程，如果GPT3.5的回答有错误，我会在下面纠正。 Upgrading from Debian 11 (“B">
<meta property="og:type" content="article">
<meta property="og:title" content="如何从Debian11升级到Debian13">
<meta property="og:url" content="https://blog.bw11.dns-dynamic.net/2024/10/07/debian-11-update-to-debian-13/index.html">
<meta property="og:site_name" content="Vps901&#39;s Blog">
<meta property="og:description" content="原文因为遥遥领先的Z-BlogPHP的编辑器不支持MarkDown，操作超级麻烦，所以干脆就丢到我们的Hexo博客来写了。   本文没图，请放心浏览。   今天的主题是不使用DD脚本把Debian11保数据升级到Debian13，因为本人过于懒惰，这里引用我们的GPT3.5的回答来作为教程，如果GPT3.5的回答有错误，我会在下面纠正。 Upgrading from Debian 11 (“B">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-10-07T00:39:15.000Z">
<meta property="article:modified_time" content="2024-10-07T00:58:04.076Z">
<meta property="article:author" content="vps901">
<meta property="article:tag" content="技术分享,Linux">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Vps901's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Vps901&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.bw11.dns-dynamic.net"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-debian-11-update-to-debian-13" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/07/debian-11-update-to-debian-13/" class="article-date">
  <time class="dt-published" datetime="2024-10-07T00:39:15.000Z" itemprop="datePublished">2024-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      如何从Debian11升级到Debian13
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>  <a target="_blank" rel="noopener" href="https://bjw7.ne.td/post/debian-11-update-to-debian-12.html">原文</a>因为遥遥领先的Z-BlogPHP的编辑器不支持MarkDown，操作超级麻烦，所以干脆就丢到我们的Hexo博客来写了。</p>
<p>  本文没图，请放心浏览。</p>
<p>  今天的主题是不使用DD脚本把Debian11保数据升级到Debian13，因为本人过于懒惰，这里引用我们的GPT3.5的回答来作为教程，如果GPT3.5的回答有错误，我会在下面纠正。</p>
<p>Upgrading from Debian 11 (“Bullseye”) to Debian 13 involves several steps. Debian releases happen in a predictable cycle, so depending on when you start the upgrade, you might have to go through Debian 12 (“Bookworm”) before getting to Debian 13, as direct upgrades between non-adjacent major releases may not be fully supported. Here’s a general step-by-step guide to upgrading from Debian 11 to Debian 13:</p>
<h3 id="1-Backup-Your-System"><a href="#1-Backup-Your-System" class="headerlink" title="1. Backup Your System"></a>1. Backup Your System</h3><p>Before doing any upgrade, it’s critical to backup important data, configurations, and system files. You can use tools like <code>rsync</code>, <code>tar</code>, or dedicated backup solutions.</p>
<h3 id="2-Update-Current-Debian-11"><a href="#2-Update-Current-Debian-11" class="headerlink" title="2. Update Current Debian 11"></a>2. Update Current Debian 11</h3><p>Make sure your current Debian 11 installation is fully updated.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt upgrade</span><br><span class="line"><span class="built_in">sudo</span> apt full-upgrade</span><br></pre></td></tr></table></figure>

<p>Then, reboot if necessary:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> reboot</span><br></pre></td></tr></table></figure>

<h3 id="3-Modify-APT-Sources-List-for-Debian-12"><a href="#3-Modify-APT-Sources-List-for-Debian-12" class="headerlink" title="3. Modify APT Sources List for Debian 12"></a>3. Modify APT Sources List for Debian 12</h3><p>You need to first upgrade to Debian 12 (“Bookworm”) before moving to Debian 13. Start by modifying the APT sources list to point to the new version.</p>
<ol>
<li>Open the sources list file:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Replace every occurrence of “bullseye” with “bookworm”. It might look something like this:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deb http://deb.debian.org/debian bookworm main contrib non-free</span><br><span class="line">deb http://deb.debian.org/debian bookworm-updates main contrib non-free</span><br><span class="line">deb http://deb.debian.org/debian-security bookworm-security main contrib non-free</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Save the file and exit the editor (<code>Ctrl+X</code>, then <code>Y</code> and <code>Enter</code>).</li>
</ol>
<h3 id="4-Update-Package-Lists-and-Upgrade-to-Debian-12"><a href="#4-Update-Package-Lists-and-Upgrade-to-Debian-12" class="headerlink" title="4. Update Package Lists and Upgrade to Debian 12"></a>4. Update Package Lists and Upgrade to Debian 12</h3><ol>
<li>Update the package list with the new Debian 12 repositories:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Perform a minimal system upgrade first to avoid removing any packages initially:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt upgrade</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Then, run a full upgrade:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt full-upgrade</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>Reboot your system:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> reboot</span><br></pre></td></tr></table></figure>

<h3 id="5-Upgrade-to-Debian-13"><a href="#5-Upgrade-to-Debian-13" class="headerlink" title="5. Upgrade to Debian 13"></a>5. Upgrade to Debian 13</h3><p>Once you have successfully upgraded to Debian 12, you can now upgrade to Debian 13.</p>
<ol>
<li>Edit your <code>/etc/apt/sources.list</code> file again:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Replace every instance of “bookworm” with the codename of Debian 13. The codename of Debian 13 is not officially announced yet (as of 2024), but you would use something like “trixie” if it follows the naming pattern.</li>
</ol>
<p>Your sources list will now look something like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deb http://deb.debian.org/debian trixie main contrib non-free</span><br><span class="line">deb http://deb.debian.org/debian trixie-updates main contrib non-free</span><br><span class="line">deb http://deb.debian.org/debian-security trixie-security main contrib non-free</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Save and exit the file.</li>
</ol>
<h3 id="6-Update-Package-Lists-and-Upgrade-to-Debian-13"><a href="#6-Update-Package-Lists-and-Upgrade-to-Debian-13" class="headerlink" title="6. Update Package Lists and Upgrade to Debian 13"></a>6. Update Package Lists and Upgrade to Debian 13</h3><ol>
<li>Update the package lists again:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Perform the minimal upgrade:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt upgrade</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Then, perform the full upgrade:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt full-upgrade</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>Reboot the system again:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> reboot</span><br></pre></td></tr></table></figure>

<h3 id="7-Clean-Up-After-Upgrade"><a href="#7-Clean-Up-After-Upgrade" class="headerlink" title="7. Clean Up After Upgrade"></a>7. Clean Up After Upgrade</h3><p>Once you have upgraded to Debian 13, you can remove obsolete or unused packages:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt autoremove</span><br></pre></td></tr></table></figure>

<p>Also, consider clearing the local repository cache:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt clean</span><br></pre></td></tr></table></figure>

<h3 id="8-Verify-the-Upgrade"><a href="#8-Verify-the-Upgrade" class="headerlink" title="8. Verify the Upgrade"></a>8. Verify the Upgrade</h3><p>Check your new Debian version with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br></pre></td></tr></table></figure>

<p>or:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/debian_version</span><br></pre></td></tr></table></figure>

<h3 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting:"></a>Troubleshooting:</h3><ul>
<li>If any issues arise during the upgrade process (like broken packages), you can try running:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dpkg --configure -a</span><br><span class="line"><span class="built_in">sudo</span> apt install -f</span><br></pre></td></tr></table></figure>

<p>This should fix broken dependencies and complete any unfinished configurations.</p>
<h3 id="Final-Notes"><a href="#Final-Notes" class="headerlink" title="Final Notes:"></a>Final Notes:</h3><ul>
<li>Always read the <strong>release notes</strong> of Debian versions before upgrading, as they might contain specific instructions or warnings.</li>
<li>Ensure that you have sufficient disk space before starting the upgrade.</li>
</ul>
<p>Following these steps should help you smoothly upgrade from Debian 11 to Debian 13.</p>
<p>  都是英文，对吧。</p>
<p>  有的机器会出现类似这样的报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">******************************************************************************</span><br><span class="line"></span><br><span class="line">*</span><br><span class="line"></span><br><span class="line">* The base-files package cannot be installed because</span><br><span class="line"></span><br><span class="line">* /bin is a symbolic link and not pointing at usr/bin exactly.</span><br><span class="line"></span><br><span class="line">*</span><br><span class="line"></span><br><span class="line">* This is an unexpected situation. Cannot proceed with the upgrade.</span><br><span class="line"></span><br><span class="line">*</span><br><span class="line"></span><br><span class="line">* For more information please read https://wiki.debian.org/UsrMerge.</span><br><span class="line"></span><br><span class="line">*</span><br><span class="line"></span><br><span class="line">******************************************************************************</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> 这里的话不能直接执行<code>rm /bin</code>和<code>ln -s /usr/bin /bin</code>，因为这样的话问题依旧还会在，正确的做法是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /</span><br><span class="line">rm bin</span><br><span class="line">ln -s /usr/bin bin</span><br></pre></td></tr></table></figure>

<p>这样你再执行<code>apt full-upgrade -y</code>就能正常更新了。</p>
<p>好的，本期教程就到这里，希望对你有帮助！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bw11.dns-dynamic.net/2024/10/07/debian-11-update-to-debian-13/" data-id="cm1yazfr10000dft0hnno1fls" data-title="如何从Debian11升级到Debian13" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-Linux/" rel="tag">技术分享,Linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2024/10/01/use-github-hexo-create-blog/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">使用Github Pages和Hexo博客程序零成本搭建一个个人博客（自用篇）</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-Linux/" rel="tag">技术分享,Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E7%94%A8-%E6%8A%80%E6%9C%AF-%E6%95%99%E7%A8%8B/" rel="tag">自用,技术,教程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-Linux/" style="font-size: 10px;">技术分享,Linux</a> <a href="/tags/%E8%87%AA%E7%94%A8-%E6%8A%80%E6%9C%AF-%E6%95%99%E7%A8%8B/" style="font-size: 10px;">自用,技术,教程</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/10/07/debian-11-update-to-debian-13/">如何从Debian11升级到Debian13</a>
          </li>
        
          <li>
            <a href="/2024/10/01/use-github-hexo-create-blog/">使用Github Pages和Hexo博客程序零成本搭建一个个人博客（自用篇）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 vps901<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>